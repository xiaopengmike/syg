<!--pages/index/index.wxml - ç™»å½•åé¦–é¡µ-->
<view class="container">
  <!-- å¤´éƒ¨åŒºåŸŸ - ç®€å•è“è‰² -->
  <view class="header">
    <view class="greeting">{{greeting}}</view>
    <view class="user-info">
      <view class="user-detail">
        <text class="user-name">{{userInfo.name}}</text>
        <text class="user-role {{userInfo.role}}">{{userInfo.role === 'principal' ? 'æ ¡é•¿' : (userInfo.role === 'teacher' ? 'è€å¸ˆ' : 'å­¦ç”Ÿ')}}</text>
      </view>
      <view class="logout-btn" bindtap="handleLogout">é€€å‡º</view>
    </view>
  </view>

  <!-- åŠŸèƒ½å…¥å£ -->
  <view class="menu-section">
    <view class="section-title">åŠŸèƒ½èœå•</view>
    
    <view class="menu-grid">
      <!-- è¯¾ç¨‹è¡¨ -->
      <view class="menu-item" bindtap="goToSchedule">
        <view class="menu-icon schedule-icon">
          <text class="icon">ğŸ“…</text>
        </view>
        <text class="menu-text">è¯¾ç¨‹è¡¨</text>
      </view>

      <!-- æˆ‘çš„è€å¸ˆ - ä»…æ ¡é•¿å¯è§ -->
      <view class="menu-item" wx:if="{{userInfo.role === 'principal'}}" bindtap="goToTeachers">
        <view class="menu-icon users-icon">
          <text class="icon">ğŸ‘¨â€ğŸ«</text>
        </view>
        <text class="menu-text">æˆ‘çš„è€å¸ˆ</text>
      </view>

      <!-- æˆ‘çš„å­¦ç”Ÿ - æ ¡é•¿å’Œè€å¸ˆå¯è§ -->
      <view class="menu-item" wx:if="{{userInfo.role === 'principal' || userInfo.role === 'teacher'}}" bindtap="goToStudents">
        <view class="menu-icon users-icon">
          <text class="icon">ğŸ‘¨â€ğŸ“</text>
        </view>
        <text class="menu-text">æˆ‘çš„å­¦ç”Ÿ</text>
      </view>

      <!-- æ³¨å†Œå®¡æ‰¹ - ä»…æ ¡é•¿å¯è§ -->
      <view class="menu-item" wx:if="{{userInfo.role === 'principal'}}" bindtap="goToApproval">
        <view class="menu-icon approval-icon">
          <text class="icon">âœ…</text>
          <view class="badge" wx:if="{{pendingCount > 0}}">{{pendingCount > 99 ? '99+' : pendingCount}}</view>
        </view>
        <text class="menu-text">æ³¨å†Œå®¡æ‰¹</text>
      </view>

      <!-- è¿”å›æ¬¢è¿é¡µé¢ - è¿”å›å®£ä¼ é¦–é¡µæŸ¥çœ‹æ ¡åŒºå‚è§‚ã€è¯¾ç¨‹ä»‹ç» -->
      <view class="menu-item" bindtap="goToPromo">
        <view class="menu-icon public-icon">
          <text class="icon">ğŸŒ</text>
        </view>
        <text class="menu-text">è¿”å›æ¬¢è¿é¡µé¢</text>
      </view>
    </view>
  </view>
</view>
