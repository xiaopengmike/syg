<!--pages/index/index.wxml - ç™»å½•åé¦–é¡µ-->
<custom-navbar title="è¯¾ç¨‹ç³»ç»Ÿ" showBack="{{false}}"></custom-navbar>
<view class="page-container">
  <!-- èƒŒæ™¯è£…é¥° -->
  <view class="bg-decoration">
    <view class="bg-gradient"></view>
    <view class="bg-circle circle-1"></view>
    <view class="bg-circle circle-2"></view>
  </view>

  <view class="content-wrapper">
    <!-- å¤´éƒ¨åŒºåŸŸ -->
    <view class="header">
      <view class="greeting">{{greeting}}</view>
      <view class="user-info">
        <view class="user-avatar">
          <text class="avatar-text">{{userInfo.name[0]}}</text>
        </view>
        <view class="user-detail">
          <text class="user-name">{{userInfo.name}}</text>
          <text class="user-role {{userInfo.role}}">{{userInfo.role === 'principal' ? 'æ ¡é•¿' : (userInfo.role === 'teacher' ? 'è€å¸ˆ' : 'å­¦ç”Ÿ')}}</text>
        </view>
        <view class="logout-btn" bindtap="handleLogout">é€€å‡º</view>
      </view>
    </view>

    <!-- åŠŸèƒ½å…¥å£ -->
    <view class="menu-section">
      <view class="section-header">
        <view class="section-line"></view>
        <text class="section-title">åŠŸèƒ½èœå•</text>
        <view class="section-line"></view>
      </view>
      
      <view class="menu-grid">
        <!-- è¯¾ç¨‹è¡¨ -->
        <view class="menu-item" bindtap="goToSchedule">
          <view class="menu-icon schedule-icon">
            <text class="icon">ğŸ“…</text>
          </view>
          <text class="menu-text">è¯¾ç¨‹è¡¨</text>
        </view>

        <!-- æˆ‘çš„è€å¸ˆ - ä»…æ ¡é•¿å¯è§ -->
        <view class="menu-item" wx:if="{{userInfo.role === 'principal'}}" bindtap="goToTeachers">
          <view class="menu-icon users-icon">
            <text class="icon">ğŸ‘¨â€ğŸ«</text>
          </view>
          <text class="menu-text">æˆ‘çš„è€å¸ˆ</text>
        </view>

        <!-- æˆ‘çš„å­¦ç”Ÿ - æ ¡é•¿å’Œè€å¸ˆå¯è§ -->
        <view class="menu-item" wx:if="{{userInfo.role === 'principal' || userInfo.role === 'teacher'}}" bindtap="goToStudents">
          <view class="menu-icon students-icon">
            <text class="icon">ğŸ‘¨â€ğŸ“</text>
          </view>
          <text class="menu-text">æˆ‘çš„å­¦ç”Ÿ</text>
        </view>

        <!-- æ³¨å†Œå®¡æ‰¹ - ä»…æ ¡é•¿å¯è§ -->
        <view class="menu-item" wx:if="{{userInfo.role === 'principal'}}" bindtap="goToApproval">
          <view class="menu-icon approval-icon">
            <text class="icon">âœ…</text>
            <view class="badge" wx:if="{{pendingCount > 0}}">{{pendingCount > 99 ? '99+' : pendingCount}}</view>
          </view>
          <text class="menu-text">æ³¨å†Œå®¡æ‰¹</text>
        </view>

        <!-- è¿”å›æ¬¢è¿é¡µé¢ -->
        <view class="menu-item" bindtap="goToPromo">
          <view class="menu-icon public-icon">
            <text class="icon">ğŸŒ</text>
          </view>
          <text class="menu-text">æ¬¢è¿é¡µé¢</text>
        </view>
      </view>
    </view>
  </view>
</view>
