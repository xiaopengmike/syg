<!--pages/users/list/list.wxml-->
<view class="container">
  <!-- æœç´¢æ¡† -->
  <view class="search-bar">
    <view class="search-icon">ğŸ”</view>
    <input 
      class="search-input" 
      placeholder="æœç´¢å§“å..." 
      value="{{keyword}}"
      bindinput="onSearchInput"
      bindconfirm="doSearch"
    />
    <view class="search-clear" wx:if="{{keyword}}" bindtap="clearSearch">âœ•</view>
  </view>

  <!-- ç”¨æˆ·åˆ—è¡¨ -->
  <view class="user-list" wx:if="{{list.length > 0}}">
    <view 
      class="user-item" 
      wx:for="{{list}}" 
      wx:key="_id"
      bindtap="goToDetail"
      data-id="{{item._id}}"
    >
      <view class="user-avatar">
        <text>{{item.name[0] || '?'}}</text>
      </view>
      <view class="user-info">
        <view class="user-name">{{item.name}}</view>
        <view class="user-meta">
          <text wx:if="{{item.subject}}">{{item.subject}}</text>
        </view>
      </view>
      <view class="user-status {{item.bindStatus}}">
        <text wx:if="{{item.bindStatus === 'unbound'}}">ğŸ“ æœªé‚€è¯·</text>
        <text wx:elif="{{item.bindStatus === 'pending'}}">â³ å¾…ç»‘å®š</text>
        <text wx:elif="{{item.bindStatus === 'bound'}}">âœ… å·²ç»‘å®š</text>
        <text wx:elif="{{item.bindStatus === 'registered'}}">ğŸ”— å·²æ³¨å†Œ</text>
        <text wx:elif="{{item.bindStatus === 'pending_approval'}}">ğŸ• å¾…å®¡æ‰¹</text>
        <text wx:elif="{{item.bindStatus === 'rejected'}}">âŒ å·²æ‹’ç»</text>
      </view>
      <view class="user-arrow">â€º</view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:elif="{{!isLoading}}">
    <view class="empty-icon">{{userType === 'teacher' ? 'ğŸ‘¨â€ğŸ«' : 'ğŸ‘¨â€ğŸ“'}}</view>
    <text class="empty-text">æš‚æ— {{userType === 'teacher' ? 'è€å¸ˆ' : 'å­¦ç”Ÿ'}}</text>
    <text class="empty-tip">ç‚¹å‡»å³ä¸‹è§’æ·»åŠ </text>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading-state" wx:if="{{isLoading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- æ·»åŠ æŒ‰é’® -->
  <view class="add-btn" bindtap="goToAdd">
    <text>+</text>
  </view>
</view>




