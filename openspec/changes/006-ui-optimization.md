# 变更提案：UI优化与功能完善

## 概述

| 属性 | 值 |
|------|-----|
| 提案编号 | 006 |
| 状态 | ✅ 已完成 |
| 优先级 | 中 |
| 预计工时 | 2小时 |

## 目标

优化用户界面，提升用户体验，完善功能细节。

## 范围

### 前端修改

```
miniprogram/
├── pages/
│   ├── users/
│   │   └── list/           # 隐藏课表按钮
│   ├── schedule/
│   │   ├── index/         # 添加学生筛选器
│   │   └── create/        # 按钮悬浮优化
├── components/
│   └── schedule-grid/     # 半小时分割线优化
```

## 实现细节

### 1. 课程表学生筛选器

**背景**：原有通过学生列表页的课表按钮跳转查看学生课表的方式不够直观，用户需要在多个页面间切换。

**解决方案**：
- 在课程表页面添加学生筛选器，与教师筛选器并排显示
- 支持校长同时筛选教师和学生
- 从学生列表跳转时自动选中对应学生

**代码变更**：
```javascript
// 添加学生筛选器数据
data: {
  studentOptions: [{ _id: '', name: '全部' }],
  studentIndex: 0
}

// 加载学生列表
async loadStudents() {
  // 仅校长可见
}

// 学生筛选处理
onStudentFilter(e) {
  // 更新筛选条件并重新加载课程
}
```

### 2. 隐藏学生列表课表按钮

**背景**：为了避免用户困惑，现在统一通过课程表页面的筛选器查看学生课表。

**解决方案**：
- 移除学生列表页的所有课表按钮显示
- 清理相关样式和逻辑代码

### 3. 创建排课页面按钮优化

**背景**：创建排课页面的表单较长，用户需要滚动到底部才能看到提交按钮。

**解决方案**：
- 使用固定定位让提交按钮始终悬浮在页面底部
- 优化按钮样式和层级

### 4. 课程表半小时分割线

**背景**：原有分割线不够清晰，影响用户体验。

**解决方案**：
- 整点显示实线，半点显示虚线
- 优化视觉层次

## 验收标准

- [x] 课程表页面显示教师和学生筛选器
- [x] 学生列表页不再显示课表按钮
- [x] 创建排课页面按钮始终可见
- [x] 课程表时间分割线更清晰

## 依赖

- 001-init-project.md（已完成）
- 002-user-auth.md（已完成）
- 003-user-bindable.md（已完成）
- 004-schedule.md（已完成）
- 005-conflict-detection.md（已完成）

## 后续提案

（当前阶段完成）

